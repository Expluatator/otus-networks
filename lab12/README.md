# Фильтрация в BGP

###  Задание:

  1. Настроить маршрутизаторы ISP так, чтобы к офисам отправлялся только маршрут по-умолчанию;
  2. Пограничные маршрутизаторы принимают только маршрут по-умолчанию, но R9 принимает еще префикс от R5;
  3. Настроить маршрутизатор R18 так, чтобы R9 знал маршрут по-умолчанию и префиксы от R5;
  4. Настроить сеть ISP так, чтобы на R17 не было транзитного трафика от R19 и R18;
  5. Задокументировать все изменения.



###  Решение:
  
  Все файлы изменений приведены [здесь](configs/).

  1. Для того, чтобы с ISP отправить клиентам только маршрут по-умолчанию, нужно:
     - Чтобы этот маршрут был;
     - Отфильтровать то, что отдаём клиенту так, чтобы ему ушел только префикс 0.0.0.0/0.

  [Пример на R19](configs/R19)


  2. Для того, чтобы от ISP принять только маршрут по-умолчанию, нужно отфильтровать то, что приходит от ISP и откинуть всё, кроме 0.0.0.0/0.

  [Пример на R13](configs/R13)


  3. Фактически, все остальные манипуляции с принятием и отправкой префиксов сводятся к составлению корректных prefix-list и навешиванием их на нужных соседей в процессе bgp.

  4. Для искоючения транзитного трафика R18 и R19 через R17 нужно средствами R17 настроить фильтрацию as-path таким образом, чтобы префиксы, доступные нам через AS R18 не отдавались в сторону AS R19 и наоборот.

  [Пример на R17](configs/R17)

