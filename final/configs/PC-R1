conf t

 hostname "PC-R1"

 ipv6 unicast-routing

 ip route 99.99.144.2 255.255.255.254 99.99.128.2 25 name "to OV-R1 through PF-R2"
 ip route 99.99.144.0 255.255.255.254 99.99.134.1 25 name "to ZL-R1 through PF-R1"
 ip route 99.99.148.0 255.255.255.254 99.99.130.2 25 name "to LP-R1 through PG-R1"

 ipv6 route 20FF:CCFE:FFFF:3::2/127 20FF:CCFD:FFFF:1::2 25 name "to OV-R1 through PF-R2"
 ipv6 route 20FF:CCFE:FFFF:3::/127 20FF:CCFE:FFFF:2::1 25 name "to ZL-R1 through PF-R1"
 ipv6 route 20FF:CCFF:FFFF:3::/127 20FF:CCFD:FFFF:2::2 25 name "to LP-R1 through PG-R1"

 interface Loopback64509
  description "loopback"
  ip address 10.0.0.1 255.255.255.255
  ipv6 enable
  ipv6 address FD00:CCFD:FFFF::1/128
  ipv6 address FE80::1 link-local
  no shutdown
  exit

 interface Ethernet0/0
  description "to DP-R1"
  ip address 99.99.140.0 255.255.255.254
  ipv6 enable
  ipv6 address FE80::1 link-local
  ipv6 address 20FF:CCFD:FFFF:3::0/127
  no shutdown
  exit

 interface Ethernet0/1
  description "to PG-R1"
  ip address 99.99.130.1 255.255.254.0
  ipv6 enable
  ipv6 address FE80::1 link-local
  ipv6 address 20FF:CCFD:FFFF:2::1/64
  no shutdown
  exit

 interface Ethernet0/2
  description "to PF-R2"
  ip address 99.99.128.1 255.255.254.0
  ipv6 enable
  ipv6 address FE80::1 link-local
  ipv6 address 20FF:CCFD:FFFF:1::1/64
  no shutdown
  exit

 interface Ethernet0/3
  description "to PF-R1"
  ip address 99.99.134.2 255.255.254.0
  ipv6 enable
  ipv6 address FE80::2 link-local
  ipv6 address 20FF:CCFE:FFFF:2::2/64
  no shutdown
  exit
 exit

 ip prefix-list TO_CLIENT_DP-R1 seq 5 permit 0.0.0.0/0
 ip prefix-list TO_CLIENT_DP-R1 seq 10 permit 50.50.104.0/23
 ip prefix-list TO_CLIENT_DP-R1 seq 100 deny 0.0.0.0/0 le 32

 ipv6 prefix-list TO_CLIENT_DP-R1 seq 5 permit ::/0
 ipv6 prefix-list TO_CLIENT_DP-R1 seq 10 permit 20FF:CCFF:200D::/48
 ipv6 prefix-list TO_CLIENT_DP-R1 seq 100 deny ::/0 le 128

 ip as-path access-list 1 permit ^64511_
 ip as-path access-list 1 deny .*

 ip as-path access-list 500 permit .*

 route-map SET_LP_80_FROM_64511 permit 10
  match as-path 1
  set local-preference 80
  exit
 route-map SET_LP_80_FROM_64511 permit 500
  match as-path 500
  exit

 router bgp 64509
  bgp router-id 99.99.128.1
  neighbor 99.99.128.2 remote-as 64510
  neighbor 99.99.130.2 remote-as 64511
  neighbor 99.99.134.1 remote-as 64510
  neighbor 99.99.140.1 remote-as 64501
  neighbor 20FF:CCFD:FFFF:1::2 remote-as 64510
  neighbor 20FF:CCFD:FFFF:2::2 remote-as 64511
  neighbor 20FF:CCFE:FFFF:2::1 remote-as 64510
  neighbor 20FF:CCFD:FFFF:3::1 remote-as 64501

  address-family ipv4
   neighbor 99.99.128.2 activate
   neighbor 99.99.130.2 activate
   neighbor 99.99.130.2 route-map SET_LP_80_FROM_64511 in
   neighbor 99.99.134.1 activate
   neighbor 99.99.140.1 activate
   neighbor 99.99.140.1 default-originate
   neighbor 99.99.140.1 prefix-list TO_CLIENT_DP-R1 out
   no neighbor 20FF:CCFD:FFFF:1::2 activate
   no neighbor 20FF:CCFD:FFFF:2::2 activate
   no neighbor 20FF:CCFE:FFFF:2::1 activate
   no neighbor 20FF:CCFD:FFFF:3::1 activate
   network 99.99.128.0 mask 255.255.254.0
   network 99.99.130.0 mask 255.255.254.0
   network 99.99.140.0 mask 255.255.255.254
   exit-address-family

 address-family ipv6
   neighbor 20FF:CCFD:FFFF:1::2 activate
   neighbor 20FF:CCFD:FFFF:2::2 activate
   neighbor 20FF:CCFD:FFFF:2::2 route-map SET_LP_80_FROM_64511 in
   neighbor 20FF:CCFE:FFFF:2::1 activate
   neighbor 20FF:CCFD:FFFF:3::1 activate
   neighbor 20FF:CCFD:FFFF:3::1 default-originate
   neighbor 20FF:CCFD:FFFF:3::1 prefix-list TO_CLIENT_DP-R1 out
   network 20FF:CCFD:FFFF:1::/64
   network 20FF:CCFD:FFFF:2::/64
   network 20FF:CCFD:FFFF:3::/127
   exit-address-family
  exit
 exit

 ip access-list standard 1
  remark "permit to NTP server access"
  10 permit 99.99.140.1 0.0.0.0
  20 permit 99.99.128.2 0.0.0.0
  30 permit 99.99.130.2 0.0.0.0
  40 permit 99.99.134.1 0.0.0.0
  500 deny any
  exit
 ntp access-group ipv4 serve-only 1

 ipv6 access-list NTPSERVER_IPV6_ACL
  remark "permit to NTP server access"
  permit ipv6 host 20FF:CCFD:FFFF:3::1 host 20FF:CCFD:FFFF:3::0 sequence 10
  permit ipv6 host 20FF:CCFD:FFFF:2::2 host 20FF:CCFD:FFFF:2::1 sequence 20
  permit ipv6 host 20FF:CCFD:FFFF:1::2 host 20FF:CCFD:FFFF:1::1 sequence 30
  permit ipv6 host 20FF:CCFE:FFFF:2::1 host 20FF:CCFE:FFFF:2::2 sequence 40
  deny ipv6 any any sequence 500
  exit
 ntp access-group ipv6 serve-only NTPSERVER_IPV6_ACL
 
 ntp authenticate
 ntp authentication-key 1 md5 ntpkey
 ntp trusted-key 1
 clock timezone UTC 2
 ntp master 1
